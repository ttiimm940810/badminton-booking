<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¾ç¾½çƒ | å°ˆæ¥­é ç´„ç³»çµ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', 'Noto Sans TC', sans-serif; }
        .select-card input:checked + div { border-color: #4f46e5; background-color: #f5f3ff; }
    </style>
</head>
<body class="bg-[#F8FAFC] py-12 px-4">
    <div class="max-w-xl mx-auto">
        <div class="bg-white rounded-[2.5rem] shadow-xl border border-slate-200 overflow-hidden">
            <div class="h-2 bg-gradient-to-r from-indigo-700 to-slate-400"></div>
            <div class="p-8 md:p-12">
                <div class="mb-10 text-center">
                    <h1 class="text-3xl font-bold text-slate-900 mb-2">é¾ç¾½çƒ | é ç´„ç³»çµ±</h1>
                    <p class="text-slate-500 font-medium text-[10px] tracking-widest uppercase">Badminton Professional Lab</p>
                </div>

                <form id="bookingForm" class="space-y-8">
                    <section class="space-y-4">
                        <div class="flex items-center space-x-2"><span class="w-1.5 h-1.5 rounded-full bg-indigo-600"></span><h2 class="text-xs font-bold uppercase text-slate-400 tracking-widest">1. è¯çµ¡è³‡è¨Š</h2></div>
                        <div class="grid grid-cols-2 gap-4">
                            <input type="text" name="name" required placeholder="å§“å" class="w-full px-5 py-3.5 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-500 outline-none transition-all">
                            <input type="tel" name="phone" required placeholder="é›»è©±" class="w-full px-5 py-3.5 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-500 outline-none transition-all">
                        </div>
                        <input type="text" name="lineID" placeholder="Line ID" required class="w-full px-5 py-3.5 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-500 outline-none transition-all">
                    </section>

                    <section class="space-y-3">
                        <h2 class="text-xs font-bold text-slate-400 uppercase tracking-widest">2. é¸æ“‡äººæ•¸</h2>
                        <div class="grid grid-cols-3 gap-2">
                            <label class="select-card cursor-pointer"><input type="radio" name="groupSize" value="1on1" class="sr-only peer" checked><div class="p-3 text-center rounded-xl border-2 border-slate-100 bg-white font-bold text-slate-600 text-xs transition-all">ğŸ‘¤ 1 on 1</div></label>
                            <label class="select-card cursor-pointer"><input type="radio" name="groupSize" value="1on2" class="sr-only peer"><div class="p-3 text-center rounded-xl border-2 border-slate-100 bg-white font-bold text-slate-600 text-xs transition-all">ğŸ‘¥ 1 on 2</div></label>
                            <label class="select-card cursor-pointer"><input type="radio" name="groupSize" value="1on34" class="sr-only peer"><div class="p-3 text-center rounded-xl border-2 border-slate-100 bg-white font-bold text-slate-600 text-xs transition-all">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ 1 on 3~4</div></label>
                        </div>
                    </section>

                    <section class="space-y-6">
                        <h2 class="text-xs font-bold text-slate-400 uppercase tracking-widest">3. é ç´„æ™‚æ®µ (ç™½å¤© $300 / æ™šä¸Š $450)</h2>
                        <input type="date" name="date" required class="w-full px-5 py-3.5 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-500 outline-none transition-all mb-4">
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-2">
                            <label class="relative"><input type="checkbox" name="timeSlot" value="08:00-09:00" data-fee="300" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-indigo-600 peer-checked:text-white cursor-pointer transition-all">08-09</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="09:00-10:00" data-fee="300" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-indigo-600 peer-checked:text-white cursor-pointer transition-all">09-10</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="10:00-11:00" data-fee="300" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-indigo-600 peer-checked:text-white cursor-pointer transition-all">10-11</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="11:00-12:00" data-fee="300" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-indigo-600 peer-checked:text-white cursor-pointer transition-all">11-12</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="13:00-14:00" data-fee="300" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-indigo-600 peer-checked:text-white cursor-pointer transition-all">13-14</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="14:00-15:00" data-fee="300" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-indigo-600 peer-checked:text-white cursor-pointer transition-all">14-15</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="15:00-16:00" data-fee="300" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-indigo-600 peer-checked:text-white cursor-pointer transition-all">15-16</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="16:00-17:00" data-fee="300" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-indigo-600 peer-checked:text-white cursor-pointer transition-all">16-17</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="17:00-18:00" data-fee="300" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-indigo-600 peer-checked:text-white cursor-pointer transition-all">17-18</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="18:00-19:00" data-fee="450" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-slate-900 peer-checked:text-white cursor-pointer transition-all">18-19</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="19:00-20:00" data-fee="450" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-slate-900 peer-checked:text-white cursor-pointer transition-all">19-20</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="20:00-21:00" data-fee="450" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-slate-900 peer-checked:text-white cursor-pointer transition-all">20-21</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="21:00-22:00" data-fee="450" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-slate-900 peer-checked:text-white cursor-pointer transition-all">21-22</div></label>
                            <label class="relative"><input type="checkbox" name="timeSlot" value="22:00-23:00" data-fee="450" class="sr-only peer"><div class="px-2 py-2 text-[10px] text-center font-bold rounded-xl border border-slate-200 peer-checked:bg-slate-900 peer-checked:text-white cursor-pointer transition-all">22-23</div></label>
                        </div>
                    </section>

                    <section class="space-y-3">
                        <h2 class="text-xs font-bold text-slate-400 uppercase tracking-widest">4. èª²ç¨‹æ–¹æ¡ˆ (å…¨åŒ…åƒ¹/äºº)</h2>
                        <div class="space-y-2">
                            <label class="select-card block cursor-pointer"><input type="radio" name="coursePlan" value="é«”é©—èª²" class="sr-only" checked><div class="p-4 rounded-2xl border-2 border-slate-100 bg-white flex justify-between items-center text-sm"><b>ğŸ”¹ é«”é©—èª²</b><span class="text-indigo-600 font-bold" id="label-experience">-- /äºº</span></div></label>
                            <label class="select-card block cursor-pointer"><input type="radio" name="coursePlan" value="å–®å ‚èª²" class="sr-only"><div class="p-4 rounded-2xl border-2 border-slate-100 bg-white flex justify-between items-center text-sm"><b>ğŸ”¹ å–®å ‚èª²</b><span class="text-indigo-600 font-bold" id="label-single">-- /äºº</span></div></label>
                            <label class="select-card block cursor-pointer"><input type="radio" name="coursePlan" value="10å ‚æ–¹æ¡ˆ" class="sr-only"><div class="p-4 rounded-2xl border-2 border-slate-100 bg-white flex justify-between items-center text-sm"><b>ğŸ”¹ 10 å ‚æ–¹æ¡ˆ</b><span class="text-indigo-600 font-bold" id="label-ten">-- /äºº</span></div></label>
                        </div>
                    </section>

                    <section class="space-y-4">
                        <h2 class="text-xs font-bold uppercase text-slate-400 tracking-widest">5. é™„åŠ æœå‹™</h2>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <label class="flex items-center space-x-3 p-4 bg-slate-50 rounded-2xl cursor-pointer hover:bg-indigo-50 transition-all border-2 border-transparent">
                                <input type="checkbox" name="services" value="çƒå…·è¨‚è³¼" class="w-4 h-4 rounded text-indigo-600">
                                <span class="text-sm font-semibold text-slate-700">çƒå…·è¨‚è³¼</span>
                            </label>
                            <label class="flex items-center space-x-3 p-4 bg-slate-50 rounded-2xl cursor-pointer hover:bg-indigo-50 transition-all border-2 border-transparent">
                                <input type="checkbox" name="services" value="æ‹‰ç·šæœå‹™" class="w-4 h-4 rounded text-indigo-600">
                                <span class="text-sm font-semibold text-slate-700">æ‹‰ç·šæœå‹™ (+$300)</span>
                            </label>
                        </div>
                    </section>

                    <section class="space-y-2">
                        <h2 class="text-xs font-bold uppercase text-slate-400 tracking-widest ml-1">å‚™è¨»äº‹é …</h2>
                        <textarea name="note" rows="3" placeholder="ç‰¹æ®Šéœ€æ±‚..." class="w-full px-5 py-3.5 rounded-2xl bg-slate-50 border-2 border-transparent focus:bg-white focus:border-indigo-500 outline-none transition-all text-sm"></textarea>
                    </section>

                    <button type="submit" class="w-full bg-slate-900 text-white font-bold py-5 rounded-[1.5rem] hover:bg-indigo-700 transition-all shadow-xl">ç¢ºèªæäº¤é ç´„</button>
                </form>
            </div>
        </div>
    </div>

    <div id="successModal" class="hidden fixed inset-0 z-50 flex items-center justify-center p-6 bg-slate-900/60 backdrop-blur-sm">
        <div class="bg-white rounded-[2.5rem] p-10 max-w-sm w-full text-center shadow-2xl">
            <h2 class="text-2xl font-bold text-slate-900 mb-2">é ç´„æˆåŠŸ</h2>
            <button onclick="location.reload()" class="w-full py-4 bg-indigo-600 text-white font-bold rounded-2xl transition-all">å®Œæˆ</button>
        </div>
    </div>

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbwlQUyHzsBdxaOQoqYCDaLkkd5HhS16V1644IT1pgevW6g70Opgbak-QvRY8wfKhXTIEg/exec';
        const form = document.getElementById('bookingForm');

        const pricing = {
            '1on1':  { experience: 700,  single: 800,  ten: 7500 },
            '1on2':  { experience: 500,  single: 600,  ten: 5500 },
            '1on34': { experience: 400,  single: 500,  ten: 4500 }
        };

        function updatePricing() {
            const size = form.querySelector('input[name="groupSize"]:checked').value;
            const slots = form.querySelectorAll('input[name="timeSlot"]:checked');
            const expLabel = document.getElementById('label-experience');
            const sglLabel = document.getElementById('label-single');
            const tenLabel = document.getElementById('label-ten');
            
            if (slots.length === 0) {
                expLabel.innerText = "-- /äºº";
                sglLabel.innerText = "-- /äºº";
                tenLabel.innerText = "-- /äºº";
                return 0;
            }

            let venueFee = 0;
            slots.forEach(s => venueFee += parseInt(s.getAttribute('data-fee')));
            const count = slots.length;

            const totalExp = (pricing[size].experience * count) + venueFee;
            const totalSgl = (pricing[size].single * count) + venueFee;
            const totalTen = pricing[size].ten + venueFee;

            expLabel.innerText = `$${totalExp}/äºº`;
            sglLabel.innerText = `$${totalSgl}/äºº`;
            tenLabel.innerText = `$${totalTen}/äºº`;

            const currentPlan = form.querySelector('input[name="coursePlan"]:checked').value;
            return (currentPlan === "é«”é©—èª²") ? totalExp : (currentPlan === "å–®å ‚èª²" ? totalSgl : totalTen);
        }

        form.addEventListener('change', updatePricing);

        form.addEventListener('submit', e => {
            e.preventDefault();
            const slots = form.querySelectorAll('input[name="timeSlot"]:checked');
            if (slots.length === 0) {
                alert("è«‹è‡³å°‘é¸æ“‡ä¸€å€‹é ç´„æ™‚æ®µï¼");
                return;
            }

            const formData = new FormData(form);
            const services = Array.from(form.querySelectorAll('input[name="services"]:checked')).map(cb => cb.value);
            const data = Object.fromEntries(formData.entries());
            data.totalPrice = updatePricing();
            data.services = services.join(', ');
            data.timeSlot = Array.from(slots).map(cb => cb.value).join(', ');
            data.secret_key = "LongTing_940810";

            fetch(scriptURL, { method: 'POST', mode: 'no-cors', body: JSON.stringify(data) })
            .then(() => { document.getElementById('successModal').classList.remove('hidden'); form.reset(); updatePricing(); });
        });
    </script>
</body>
</html>
